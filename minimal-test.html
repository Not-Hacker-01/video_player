<!DOCTYPE html>
<html>
<head>
    <title>Minimal YouTube Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { padding: 10px 20px; margin: 5px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Minimal YouTube Test</h1>
    <button onclick="testVideo()">Test YouTube Video</button>
    <button onclick="closeVideo()">Close Video</button>
    <div id="status"></div>

    <script>
        // Minimal implementation to test YouTube
        function createVideoAdPlayer(config) {
            console.log('Creating player with config:', config);
            
            const container = document.createElement('div');
            container.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                width: 280px;
                height: 500px;
                border-radius: 16px;
                overflow: hidden;
                box-shadow: 0 25px 50px rgba(0,0,0,0.25);
                z-index: 9999;
            `;
            
            const videoId = config.videoId;
            const youtubeUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&loop=1&playlist=${videoId}&enablejsapi=1&controls=1&rel=0&modestbranding=1&fs=1&cc_load_policy=0&iv_load_policy=3`;
            
            container.innerHTML = `
                <div style="position: relative; width: 100%; height: 100%; background: black;">
                    <button id="close-btn" style="position: absolute; top: 12px; right: 12px; z-index: 30; background: rgba(0,0,0,0.6); color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer;">Ã—</button>
                    <iframe src="${youtubeUrl}" style="width: 100%; height: 100%; border: none;" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
            `;
            
            document.body.appendChild(container);
            
            const closeBtn = container.querySelector('#close-btn');
            closeBtn.onclick = () => {
                container.remove();
                if (config.onClose) config.onClose();
            };
            
            return {
                close: () => container.remove(),
                play: () => console.log('Play called'),
                pause: () => console.log('Pause called')
            };
        }
        
        let currentPlayer = null;
        
        function testVideo() {
            try {
                currentPlayer = createVideoAdPlayer({
                    videoId: 'HfUGeWXS-bE',
                    onClose: () => {
                        currentPlayer = null;
                        showStatus('Video closed', 'success');
                    }
                });
                showStatus('YouTube video created!', 'success');
            } catch (error) {
                showStatus(`Error: ${error.message}`, 'error');
            }
        }
        
        function closeVideo() {
            if (currentPlayer) {
                currentPlayer.close();
                currentPlayer = null;
                showStatus('Video closed', 'success');
            }
        }
        
        function showStatus(message, type) {
            document.getElementById('status').innerHTML = `<div class="status ${type}">${message}</div>`;
        }
    </script>
</body>
</html>
